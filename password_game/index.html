<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Password Game</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: radial-gradient(circle at top, #1a1a1a, #000);
    color: #fff;
    font-family: "Inter", sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  .container {
    width: 90%;
    max-width: 600px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
    padding: 30px;
    backdrop-filter: blur(8px);
    text-align: center;
  }
  h1 {
    font-size: 2em;
    margin-bottom: 10px;
  }
  input {
    width: 100%;
    padding: 12px;
    font-size: 1.1em;
    border-radius: 8px;
    border: none;
    outline: none;
    margin-bottom: 20px;
  }
  .rules {
    text-align: left;
    font-size: 0.95em;
    line-height: 1.6em;
    max-height: 55vh;
    overflow-y: auto;
    padding-right: 8px;
    scrollbar-width: thin;
    scrollbar-color: #00ff99 #222;
  }
  .rules::-webkit-scrollbar {
    width: 8px;
  }
  .rules::-webkit-scrollbar-thumb {
    background-color: #00ff99;
    border-radius: 8px;
  }
  .rule {
    position: relative;
    padding: 6px 10px;
    border-radius: 8px;
    transition: all 0.4s ease;
  }
  .rule.valid {
    color: #00ff99;
    background: rgba(0, 255, 100, 0.1);
    border-left: 3px solid #00ff99;
    transform: translateX(4px);
  }
  .rule.invalid {
    color: #ff5555;
    background: rgba(255, 80, 80, 0.05);
    border-left: 3px solid transparent;
    transform: translateX(0);
  }
  .rule span {
    display: inline-block;
    margin-right: 6px;
    font-weight: bold;
    transition: transform 0.3s ease;
  }
  .rule.valid span {
    transform: scale(1.2) rotate(-10deg);
  }
  #success {
    margin-top: 20px;
    font-size: 1.2em;
    color: #00ffcc;
    opacity: 0;
    transition: opacity 1s ease;
  }
  #success.visible { opacity: 1; }
</style>
</head>
<body>
  <div class="container">
    <h1>üîê The Password Game</h1>
    <p>Create a password that satisfies all the rules below.</p>
    <input id="password" type="text" placeholder="Type your password..." autocomplete="off">
    <div class="rules" id="rules"></div>
    <div id="success">üéâ Perfect! You beat the password game!</div>
    <div id="reward" style="display:none; margin-top:20px; font-size:1.1em; color:#00ff99;"></div>
    <canvas id="confetti" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>
  </div>

<script>
const allRules = [
  { text: "Must be at least 5 characters long", check: p => p.length >= 5 },
  { text: "Must include a number", check: p => /[0-9]/.test(p) },
  { text: "Must include an uppercase letter", check: p => /[A-Z]/.test(p) },
  { text: "Must include a lowercase letter", check: p => /[a-z]/.test(p) },
  { text: "Must include the word 'cat'", check: p => /cat/i.test(p) },
  { text: "Must include a color (red, green, blue)", check: p => /(red|green|blue)/i.test(p) },
  { text: "Must include an emoji üò∫", check: p => /[\u{1F300}-\u{1FAFF}]/u.test(p) },
  { text: "Must include today's year", check: p => p.includes(new Date().getFullYear().toString()) },
  { text: "Must not contain the word 'password'", check: p => !/password/i.test(p) },
  { text: "Must include the word 'bacon'", check: p => /bacon/i.test(p) },
  { text: "If it includes 'bacon', it must also include 'chicken'", check: p => /bacon/i.test(p) ? /chicken/i.test(p) : true },
  { text: "Must contain the name of a planet (Mars, Venus, Earth...)", check: p => /(mars|venus|earth|jupiter|saturn|neptune)/i.test(p) },
  { text: "Must include at least 3 different vowels", check: p => {
      const vowels = p.match(/[aeiou]/gi);
      return vowels && new Set(vowels.map(v => v.toLowerCase())).size >= 3;
    } 
  },
  { text: "Must include at least one Roman numeral (I, V, X, L, C, D, M)", check: p => /[IVXLCDM]/.test(p) },
  { text: "Must reference time (like 12:00 or 3PM)", check: p => /(\d{1,2}(:\d{2})?\s?(am|pm)?)/i.test(p) },
  { text: "Must include at least one Greek letter (Œ±, Œ≤, Œ≥...)", check: p => /[Œ±Œ≤Œ≥Œ¥ŒµŒ∂Œ∑Œ∏ŒπŒ∫ŒªŒºŒΩŒæŒøœÄœÅœÉœÑœÖœÜœáœàœâ]/i.test(p) },
  { text: "Must include the phrase 'üí™ strong'", check: p => /üí™\s*strong/i.test(p) },
  { text: "Must mention your favorite animal (dog, frog, sloth...)", check: p => /(dog|frog|sloth|owl|bear|fox|penguin|koala)/i.test(p) },
  { text: "Must contain a food item (pizza, sushi, taco)", check: p => /(pizza|sushi|taco)/i.test(p) },
  { text: "Must include a random math equation (like 2+2=4)", check: p => /\d+\+\d+=\d+/.test(p) },
  { text: "Must include the word 'banana' ‚Äî because potassium", check: p => /banana/i.test(p) },
  { text: "Must include a philosophical statement (like 'I think therefore I am')", check: p => /(think therefore|existence|meaning of life|cogito)/i.test(p) },
  { text: "Must contain the word '404' to honor the internet gods", check: p => /404/.test(p) },
  { text: "Must include a hashtag (e.g., #winning)", check: p => /#\w+/.test(p) },
  { text: "Must mention a movie title (Matrix, Shrek, Inception)", check: p => /(matrix|shrek|inception)/i.test(p) },
  { text: "Must include 'coffee' or 'tea' to stay awake", check: p => /(coffee|tea)/i.test(p) },
  { text: "Must include laughter (haha or lol)", check: p => /(haha|lol)/i.test(p) },
  { text: "Must quote a number greater than 9000", check: p => /(900[1-9]|9[1-9][0-9]{2,})/.test(p) },
  { text: "Must mention 'AI' or 'robot' because we‚Äôre watching", check: p => /(ai|robot)/i.test(p) },
  { text: "Must include a weather word (rain, sun, storm, snow)", check: p => /(rain|sun|storm|snow)/i.test(p) },
  { text: "Must end with a question mark (?) ‚Äî because life is uncertain", check: p => p.endsWith("?") }
];

const rulesContainer = document.getElementById("rules");
let visibleRules = 1;

function renderRules() {
  // Only append new rule, do not clear or rebuild all
  const rule = allRules[visibleRules - 1];
  const el = document.createElement("div");
  el.classList.add("rule", "invalid");
  el.innerHTML = `<span>‚ùå</span><b>${visibleRules}.</b> ${rule.text}`;
  rulesContainer.appendChild(el);
  rule.el = el;
}
renderRules();

const passwordInput = document.getElementById("password");
const success = document.getElementById("success");

function setRuleState(rule, ok) {
  if (ok) {
    if (!rule.el.classList.contains("valid")) {
      rule.el.classList.remove("invalid");
      rule.el.classList.add("valid");
      rule.el.innerHTML = `<span>‚úÖ</span><b>${allRules.indexOf(rule) + 1}.</b> ${rule.text}`;
      rule.el.style.boxShadow = "0 0 12px rgba(0,255,100,0.6)";
      setTimeout(() => rule.el.style.boxShadow = "none", 250);
    }
  } else {
    if (!rule.el.classList.contains("invalid")) {
      rule.el.classList.remove("valid");
      rule.el.classList.add("invalid");
      rule.el.innerHTML = `<span>‚ùå</span><b>${allRules.indexOf(rule) + 1}.</b> ${rule.text}`;
    }
  }
}

function allPassedVisible(value) {
  for (let i = 0; i < visibleRules; i++) {
    if (!allRules[i].check(value)) return false;
  }
  return true;
}

passwordInput.addEventListener("input", () => {
  const value = passwordInput.value; // do NOT trim; respect end-char rules exactly

  // 1) Evaluate all currently visible rules
  for (let i = 0; i < visibleRules; i++) {
    const rule = allRules[i];
    setRuleState(rule, rule.check(value));
  }

  // 2) Immediately unlock next rules as long as everything visible is valid
  while (visibleRules < allRules.length && allPassedVisible(value)) {
    visibleRules++;
    const nextRule = allRules[visibleRules - 1];
    const el = document.createElement("div");
    el.className = "rule invalid";
    el.innerHTML = `<span>‚ùå</span><b>${visibleRules}.</b> ${nextRule.text}`;
    rulesContainer.appendChild(el);
    nextRule.el = el;

    // Evaluate the newly revealed rule right away
    setRuleState(nextRule, nextRule.check(value));
  }

  // 3) Win state if *all* rules exist and pass
  const allExist = allRules.every(r => r.el);
  const allPass = allExist && allRules.every(r => r.check(value));
  if (allPass) {
    success.classList.add("visible");
    showReward(value);
  } else {
    success.classList.remove("visible");
    reward.style.display = "none";
  }
});

const reward = document.getElementById("reward");
const confettiCanvas = document.getElementById("confetti");
const ctx = confettiCanvas.getContext("2d");
let particles = [];

function showReward(password) {
  reward.style.display = "block";
  reward.innerHTML = `üèÜ Congratulations! Your final password is:<br><b style="color:#fff;background:#00ff99;padding:6px 10px;border-radius:8px;">${password}</b>`;
  launchConfetti();
}

function launchConfetti() {
  const width = confettiCanvas.width = window.innerWidth;
  const height = confettiCanvas.height = window.innerHeight;
  particles = Array.from({ length: 200 }, () => ({
    x: Math.random() * width,
    y: Math.random() * height - height,
    r: Math.random() * 6 + 2,
    d: Math.random() * 2 + 1,
    color: `hsl(${Math.random() * 360}, 100%, 60%)`
  }));
  animateConfetti();
}

function animateConfetti() {
  ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
  particles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    ctx.fillStyle = p.color;
    ctx.fill();
    p.y += p.d;
    if (p.y > confettiCanvas.height) p.y = -10;
  });
  requestAnimationFrame(animateConfetti);
}
</script>
</body>
</html>